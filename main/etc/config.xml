<!-- contains XProc standard and optional step definitions //-->
<!-- TODO: decide if xproc.xq own extensions live in config.xml or in seperate config file//-->
<?xml version="1.0" encoding="UTF-8"?>
<p:pipeline-library xmlns:p ="http://www.w3.org/ns/xproc" 
                    xmlns:ext ="http://xproc.net/xproc/ext"
                    xmlns:xproc = "http://xproc.net/xproc"
                    name="xproc-library">
<!--

    xproc:arity = total number of possible inputs and options

//-->

   <p:declare-step type="util:step" name="step" xproc:arity="2">
      <p:input port="input" primary="true"/>
   </p:declare-step>
   
   <p:declare-step type="util:step" name="step" xproc:arity="2">
      <p:input port="input" primary="true"/>
   </p:declare-step>

   <p:declare-step type="p:compare" name="compare" xproc:arity="3">
      <p:input port="source" primary="true"/>
      <p:input port="alternate"/>
      <p:output port="result" primary="false"/>
      <p:option name="fail-if-not-equal" value="false"/>
   </p:declare-step>
   
   <p:declare-step type="p:count" name="count" xproc:arity="1">
      <p:input port="source" sequence="true"/>
      <p:output port="result"/>
   </p:declare-step>

   <p:declare-step type="p:error" name="error" xproc:arity="2">
      <p:option name="code" required="true"/>
      <p:option name="description" required="true"/>
   </p:declare-step>

   <p:declare-step type="p:identity" name="identity" xproc:arity="1">
      <p:input port="source" sequence="true"/>
      <p:output port="result" sequence="true"/>
   </p:declare-step>

   <p:declare-step type="p:wrap" name="wrap" xproc:arity="4">
      <p:input port="source"/>
      <p:output port="result"/>
      <p:option name="wrapper" required="true"/>
      <p:option name="match" required="true"/>
      <p:option name="group-adjacent"/>
   </p:declare-step>

</p:pipeline-library>