<html xmlns:fn="http://www.w3.org/2003/05/xpath-functions">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>
             .good {background-color: #3F0;}
             .bad {background-color:#F30;}
         </style></head>
   <body>
      <h1>Core XQuery Unit Tests</h1>
      <p><b>94% Tests ran successfully</b><br>:Test the core XProc.xq XQuery functions
      </p>
      <table border="1">
         <tr>
            <td>test name</td>
            <td>status</td>
            <td>result</td>
            <td>expected</td>
         </tr>
         <tr>
            <td><b>run xproc main entrypoint</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">main xproc.xq executed</textarea></td>
            <td><textarea name="content" rows="6" cols="60">main xproc.xq executed</textarea></td>
         </tr>
         <tr>
            <td><b>run xproc util:help</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">help util executed</textarea></td>
            <td><textarea name="content" rows="6" cols="60">help util executed</textarea></td>
         </tr>
         <tr>
            <td><b>run xproc util:eval which evals to true</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
         </tr>
         <tr>
            <td><b>run xproc util:eval which evals to false</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
         </tr>
         <tr>
            <td><b>run saxon:evaluate which evals to true</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
         </tr>
         <tr>
            <td><b>run util:evalXPATH which evals to true</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
         </tr>
         <tr>
            <td><b>testing util:call</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">
         <c:result xmlns:c="http://www.w3.org/ns/xproc-step">1</c:result>
      </textarea></td>
            <td><textarea name="content" rows="6" cols="60">1</textarea></td>
         </tr>
         <tr>
            <td><b>directly testing saxon:call</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">
         <c:result xmlns:c="http://www.w3.org/ns/xproc-step">1</c:result>
      </textarea></td>
            <td><textarea name="content" rows="6" cols="60">1</textarea></td>
         </tr>
         <tr>
            <td><b>run xproc parse function</b></td>
            <td>
               <div class="bad">failed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">import module namespace xproc = "http://xproc.net/xproc"
                        at "src/xquery/xproc.xqm";
import module namespace util = "http://xproc.net/xproc/util"
                        at "src/xquery/util.xqm";
import module namespace std = "http://xproc.net/xproc/std"
                        at "src/xquery/std.xqm";
import module namespace ext = "http://xproc.net/xproc/ext"
                        at "src/xquery/ext.xqm";
import module namespace opt = "http://xproc.net/xproc/opt"
                        at "src/xquery/opt.xqm";
let $O0 := &lt;test/&gt; 
let $pipeline := &lt;p:pipeline xmlns:xproc="http://xproc.net/xproc" xmlns:p="http://www.w3.org/ns/xproc" xproc:preparsed="true" name="helloworld"&gt;&lt;util:step xmlns:util="http://xproc.net/xproc/util" name="helloworld" xproc:defaultname="!1:helloworld:helloworld" xproc:type="ext"&gt;&lt;p:input port="input" primary="true" select=""&gt;&lt;p:pipe step="helloworld" port=""/&gt;&lt;/p:input&gt;&lt;/util:step&gt;&lt;p:count name="step1" xproc:defaultname="!4:helloworld:step1" xproc:type="std"&gt;&lt;p:input port="source" primary="true" select=""&gt;&lt;p:pipe step="!1:helloworld:helloworld" port=""/&gt;&lt;/p:input&gt;&lt;p:output port="result" primary="true" select=""/&gt;&lt;/p:count&gt;&lt;p:identity name="step2" xproc:defaultname="!2:helloworld:step2" xproc:type="std"&gt;&lt;p:input port="source" primary="true" select=""&gt;&lt;p:pipe step="!4:helloworld:step1" port="result"/&gt;&lt;/p:input&gt;&lt;p:output port="result" primary="true" select=""/&gt;&lt;/p:identity&gt;&lt;p:count name="step3" xproc:defaultname="!3:helloworld:step3" xproc:type="std"&gt;&lt;p:input port="source" primary="true" select=""&gt;&lt;p:pipe step="!2:helloworld:step2" port="result"/&gt;&lt;/p:input&gt;&lt;p:output port="result" primary="true" select=""/&gt;&lt;/p:count&gt;&lt;/p:pipeline&gt; 
let $steps := ( "!4:helloworld:step1", "!2:helloworld:step2", "!3:helloworld:step3", "") return util:step-fold($pipeline,$steps, saxon:function("xproc:evalstep", 3),($O0,""))</textarea></td>
            <td><textarea name="content" rows="6" cols="60">import module namespace xproc = "http://xproc.net/xproc" at "src/xquery/xproc.xqm"; import module namespace comp = "http://xproc.net/xproc/comp" at "src/xquery/comp.xqm"; import module namespace util = "http://xproc.net/xproc/util" at "src/xquery/util.xqm"; import module namespace std = "http://xproc.net/xproc/std" at "src/xquery/std.xqm"; import module namespace ext = "http://xproc.net/xproc/ext" at "src/xquery/ext.xqm"; let $O0 := <test></test> let $steps := ("pre step",$ext:pre, "step1", $std:count, "step2", $std:identity, "step3", $std:count, "post-step",$ext:post) return util:step-fold($steps, saxon:function("xproc:evalstep", 3),($O0,""))</textarea></td>
         </tr>
         <tr>
            <td><b>simple util:xquery test</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">1</textarea></td>
            <td><textarea name="content" rows="6" cols="60">1</textarea></td>
         </tr>
         <tr>
            <td><b>testing subsequence</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">saxon:function("std:identity", 1)</textarea></td>
            <td><textarea name="content" rows="6" cols="60"></textarea></td>
         </tr>
         <tr>
            <td><b>testing util:timing</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
         </tr>
         <tr>
            <td><b>testing fn:trace</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
         </tr>
         <tr>
            <td><b>testing util:try</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
         </tr>
         <tr>
            <td><b>xproc:step-available function</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
         </tr>
         <tr>
            <td><b>xproc:step-available function</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
            <td><textarea name="content" rows="6" cols="60">false</textarea></td>
         </tr>
         <tr>
            <td><b>xproc:step-available function</b></td>
            <td>
               <div class="good">passed </div>
            </td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
            <td><textarea name="content" rows="6" cols="60">true</textarea></td>
         </tr>
      </table>
      
      failed: 1 /  success: 16 / total: 17
      <hr>
      <p style="text-align:right"><i>2008-06-29T15:49:06.43+02:00 generated by <a href="http://code.google.com/p/xprocxq">XQuery Unit Test</a>, by jim.fuller@webcomposite.com</i></p>
   </body>
</html>